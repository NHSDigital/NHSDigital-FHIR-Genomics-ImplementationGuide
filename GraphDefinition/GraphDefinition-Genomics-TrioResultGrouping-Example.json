{
 "resourceType": "GraphDefinition",
 "id": "GraphDefinition-Genomics-TrioResultGrouping-Example",
 "url": "https://fhir.nhs.uk/GraphDefinition/genomics-trio-result-grouping",
 "name": "GenomicsTrioResultGrouping",
 "version": "0.1.0",
 "status": "draft",
 "date": "2026-01-13",
 "publisher": "NHS England",
 "description": "GraphDefinition for retrieving all DiagnosticReports and related resources for a genomic trio test, starting from a RequestGroup that links the trio.",
 "start": "RequestGroup",
 "link": [
  {
   "path": "RequestGroup.action.resource",
   "description": "Link to ServiceRequests for each member of the trio",
   "min": 1,
   "max": "*",
   "target": [
    {
     "type": "ServiceRequest",
     "link": [
      {
       "path": "ServiceRequest.subject",
       "description": "Link to the patient the request is for (proband, father, or mother)",
       "min": 1,
       "max": "1",
       "target": [
        {
         "type": "Patient"
        }
       ]
      },
      {
       "path": "ServiceRequest.requester",
       "description": "Link to the requester of the genomic test order",
       "min": 1,
       "max": "1",
       "target": [
        {
         "type": "PractitionerRole"
        }
       ]
      },
      {
       "path": "ServiceRequest.supportingInfo",
       "description": "Link to additional clinical information to support processing/interpretation of the request",
       "min": 0,
       "max": "*",
       "target": [
        {
         "type": "Observation"
        },
        {
         "type": "Specimen"
        },
        {
         "type": "Consent"
        },
        {
         "type": "QuestionnaireResponse"
        },
        {
         "type": "Condition"
        },
        {
         "type": "RelatedPerson"
        }
       ]
      },
      {
       "path": "ServiceRequest.specimen",
       "description": "Optional link to specimen where this has already been collected/ordered prior to request submission",
       "min": 0,
       "max": "*",
       "target": [
        {
         "type": "Specimen"
        }
       ]
      },
      {
       "description": "DiagnosticReport(s) generated from this ServiceRequest",
       "min": 0,
       "max": "*",
       "target": [
        {
         "type": "DiagnosticReport",
         "params": "basedOn={ref}",
         "link": [
          {
           "path": "DiagnosticReport.subject",
           "description": "Link to the patient the report is concerning",
           "min": 1,
           "max": "1",
           "target": [
            {
             "type": "Patient"
            }
           ]
          },
          {
           "path": "DiagnosticReport.specimen",
           "description": "Link to the specimens used during testing to generate the report",
           "min": 0,
           "max": "*",
           "target": [
            {
             "type": "Specimen"
            }
           ]
          },
          {
           "path": "DiagnosticReport.result",
           "description": "Links to Observations forming the results reported in the DiagnosticReport",
           "min": 0,
           "max": "*",
           "target": [
            {
             "type": "Observation"
            }
           ]
          }
         ]
        }
       ]
      }
     ]
    }
   ]
  }
 ]
}